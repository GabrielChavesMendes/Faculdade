<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assets/css/footer.css" />
    <link rel="stylesheet" href="../assets/css/nav.css" />
    <link rel="stylesheet" href="../assets/css/styletreinos.css" />
    <script src="../assets/js/treinos.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

    <title>Administrador</title>
</head>

<body>
    <header>
        <nav class="nav-bar">
            <div class="logo">
                <a href="../pages/index.html"><img src="../assets/images/logMediLog.png" id="logo" alt="Logo" /></a>
            </div>
            <div class="nav-list">
                <ul>
                    <li class="nav-item"><a href="#inicio" class="nav-link">Início</a></li>
                    <li class="nav-item"><a href="#projetos" class="nav-link">Projetos</a></li>
                    <li class="nav-item"><a href="#footer" class="nav-link">Sobre</a></li>
                </ul>
            </div>
            <div class="mobile-menu-icon">
                <button onclick="menuShow()"><img class="icon" src="./assets/img/open-menu-white.svg"
                        alt="Menu" /></button>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1 class="titulo">Página do Administrador Hospitalar</h1>

        <!-- Adicionar novo médico -->
        <div class="container">
            <div class="toggle" onclick="toggleContent(this)">
                <span class="arrow">&#9654;</span>
                <span class="title">Adicionar novo médico</span>
            </div>
            <div class="content">
                <div class="mb-3">
                    <label for="nomeMedico" class="form-label">Nome do médico</label>
                    <input type="text" class="form-control" id="nomeMedico" required />
                </div>

                <div class="mb-3">
                    <label for="emailMedico" class="form-label">Email Profissional</label>
                    <input type="email" class="form-control" id="emailMedico" required />
                </div>

                <div class="mb-3">
                    <label for="crm" class="form-label">CRM</label>
                    <input type="text" class="form-control" id="crm" required />
                </div>

                <div class="mb-3">
                    <label for="especialidadeMedico" class="form-label">Especialidade(s)</label>
                    <input type="text" class="form-control" id="especialidadeMedico" required />
                </div>

                <div class="mb-3">
                    <label for="senhaMedico" class="form-label">Senha de Acesso</label>
                    <input type="password" class="form-control" id="senhaMedico" required />
                </div>

                <button type="button" class="btn btn-success" onclick="cadastrarMedico()">Salvar</button>
            </div>
        </div>

        <!-- Adicionar novo farmacêutico -->
        <div class="container">
            <div class="toggle" onclick="toggleContent(this)">
                <span class="arrow">&#9654;</span>
                <span class="title">Adicionar novo farmacêutico</span>
            </div>
            <div class="content">
                <div class="mb-3">
                    <label for="nomeFarmaceutico" class="form-label">Nome do farmacêutico</label>
                    <input type="text" class="form-control" id="nomeFarmaceutico" required />
                </div>

                <div class="mb-3">
                    <label for="emailFarmaceutico" class="form-label">Email Profissional</label>
                    <input type="email" class="form-control" id="emailFarmaceutico" required />
                </div>

                <div class="mb-3">
                    <label for="crf" class="form-label">CRF</label>
                    <input type="text" class="form-control" id="crf" required />
                </div>

                <div class="mb-3">
                    <label for="senhaFarmaceutico" class="form-label">Senha de Acesso</label>
                    <input type="password" class="form-control" id="senhaFarmaceutico" required />
                </div>

                <button type="button" class="btn btn-success" onclick="cadastrarFarmaceutico()">Salvar</button>
            </div>
        </div>
    </div>

    <footer>
        <div id="footer_content">
            <div id="footer_contacts">
                <a href="../pages/index.html"><img src="../assets/images/logMediLog.png" id="logo" alt="Logo" /></a>
                <div id="footer_social_media">
                    <a href="#" class="footer-link" id="instagram"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="footer-link" id="facebook"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" class="footer-link" id="whatsapp"><i class="fa-brands fa-whatsapp"></i></a>
                </div>
            </div>
            <ul class="footer-list">
                <li>
                    <h3>Blog</h3>
                </li>
                <li><a href="#" class="footer-link">Tech</a></li>
                <li><a href="#" class="footer-link">Adventures</a></li>
                <li><a href="#" class="footer-link">Music</a></li>
            </ul>
            <ul class="footer-list">
                <li>
                    <h3>Products</h3>
                </li>
                <li><a href="#" class="footer-link">App</a></li>
                <li><a href="#" class="footer-link">Desktop</a></li>
                <li><a href="#" class="footer-link">Cloud</a></li>
            </ul>
            <div id="footer_subscribe">
                <h3>Subscribe</h3>
                <p>Enter your e-mail to get notified about our news solutions</p>
                <div id="input_group">
                    <input type="email" id="email" />
                    <button><i class="fa-regular fa-envelope"></i></button>
                </div>
            </div>
        </div>
        <div id="footer_copyright">
            &#169; 2024 all rights reserved
        </div>
    </footer>

    <script>
        // Função para exibir e ocultar conteúdo
        function toggleContent(element) {
            const content = element.nextElementSibling;
            const arrow = element.querySelector('.arrow');

            if (content.style.display === "none" || content.style.display === "") {
                content.style.display = "block";
                arrow.innerHTML = "&#9660;"; // Mudando para seta para baixo
            } else {
                content.style.display = "none";
                arrow.innerHTML = "&#9654;"; // Mudando para seta para direita
            }
        }

        // Função para ocultar a senha digitada
        function handlePasswordInput(input) {
            if (input.value) {
                input.type = "password"; // Mantém a senha oculta
            }
        }


        async function cadastrarFarmaceutico() {
            const nome = document.getElementById('nomeFarmaceutico').value;
            const email = document.getElementById('emailFarmaceutico').value;
            const crf = document.getElementById('crf').value;
            const senha = document.getElementById('senhaFarmaceutico').value;

            const farmacêutico = {
                nome: nome,
                email: email,
                crf: crf,
                senha: senha
            };

            try {
                const response = await fetch('http://localhost:4567/farmaceuticos', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(farmacêutico)
                });

                if (response.ok) {
                    const result = await response.json();
                    alert('Farmacêutico cadastrado com sucesso!');
                    console.log(result); // Aqui você pode adicionar lógica para atualizar a interface, se necessário
                    document.getElementById('nomeFarmaceutico').value = '';
                    document.getElementById('emailFarmaceutico').value = '';
                    document.getElementById('crf').value = '';
                    document.getElementById('senhaFarmaceutico').value = '';
                    toggleContent(this)
                } else {
                    throw new Error('Erro ao cadastrar farmacêutico');
                }
            } catch (error) {
              //  console.error('Erro:', error);
             //   alert('Erro ao cadastrar farmacêutico. Tente novamente mais tarde.');
            }
        }

        async function cadastrarMedico() {
            const nome = document.getElementById('nomeMedico').value;
            const email = document.getElementById('emailMedico').value; // Corrigido
            const crm = document.getElementById('crm').value;
            const especialidade = document.getElementById('especialidadeMedico').value; // Corrigido
            const senha = document.getElementById('senhaMedico').value; // Corrigido

            console.log('Cadastrando médico:', { nome, email, crm, especialidade, senha }); // Adicionei log

            const medico = {
                nome: nome,
                email: email,
                crm: crm,
                especialidade: especialidade,
                senha: senha
            };

            try {
                const response = await fetch('http://localhost:4567/medicos', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(medico)
                });

                if (response.ok) {
                    const result = await response.json();
                    alert('Médico cadastrado com sucesso!');
                    console.log(result); // Aqui você pode adicionar lógica para atualizar a interface, se necessário



                    document.getElementById('nomeMedico').value = '';
                    document.getElementById('emailMedico').value = '';
                    document.getElementById('crm').value = '';
                    document.getElementById('especialidadeMedico').value = '';
                    document.getElementById('senhaMedico').value = '';
                    toggleContent(this)
                    listarMedicos(); // Certifique-se de que esta função está definida
                } else {
                    throw new Error('Erro ao cadastrar médico');
                }
            } catch (error) {
                // console.error('Erro:', error);
                // alert('Erro ao cadastrar médico. Tente novamente mais tarde.');
            }
        }


    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>

    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <script src="https://kit.fontawesome.com/4e1bc412de.js" crossorigin="anonymous"></script>
</body>

</html>